<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SapthaVarnah Admin</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-color: #f6f5f2;
            --text-primary: #1c1c1c;
            --text-secondary: #5a5a5a;
            --page-accent: #003366;
            --accent-energy: #9C4221;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-primary);
            display: flex;
            min-height: 100vh;
        }

        .admin-sidebar {
            width: 260px;
            background: #fff;
            padding: 30px 25px;
            box-shadow: 4px 0 20px rgba(0,0,0,0.05);
            position: fixed;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .admin-logo {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--page-accent);
            margin-bottom: 40px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .admin-logo-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--page-accent), var(--accent-energy));
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
        }

        .admin-menu { flex: 1; }

        .admin-menu a {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 14px 18px;
            color: var(--text-secondary);
            text-decoration: none;
            border-radius: 12px;
            margin-bottom: 8px;
            font-weight: 500;
            font-size: 0.95rem;
            transition: all 0.25s ease;
        }

        .admin-menu a:hover {
            background: rgba(0, 51, 102, 0.08);
            color: var(--page-accent);
        }

        .admin-menu a.active {
            background: var(--page-accent);
            color: white;
            box-shadow: 0 4px 15px rgba(0, 51, 102, 0.25);
        }

        .sidebar-footer {
            padding-top: 20px;
            border-top: 1px solid rgba(0,0,0,0.05);
        }

        .sidebar-footer a {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.85rem;
            color: var(--text-secondary);
            text-decoration: none;
            padding: 10px 0;
        }

        .admin-content {
            margin-left: 260px;
            padding: 40px 50px;
            width: calc(100% - 260px);
            min-height: 100vh;
        }

        .admin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(0,0,0,0.05);
        }

        .admin-header h1 {
            font-size: 1.8rem;
            font-weight: 600;
        }

        .header-actions {
            display: flex;
            gap: 12px;
        }

        .btn {
            padding: 12px 24px;
            border-radius: 12px;
            font-weight: 600;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.25s ease;
            border: none;
            font-family: 'Inter', sans-serif;
        }

        .btn-primary {
            background: var(--page-accent);
            color: white;
            box-shadow: 0 4px 15px rgba(0, 51, 102, 0.25);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 51, 102, 0.35);
        }

        .btn-secondary {
            background: white;
            color: var(--text-primary);
            border: 1px solid rgba(0,0,0,0.1);
        }

        .editor-form { display: none; max-width: 900px; }
        .editor-form.active { display: block; }

        .page-title {
            font-size: 1.4rem;
            font-weight: 600;
            margin-bottom: 30px;
            text-transform: capitalize;
        }

        .section-card {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 25px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.04);
            border: 1px solid rgba(0,0,0,0.04);
        }

        .section-card h3 {
            font-size: 1rem;
            font-weight: 600;
            color: var(--page-accent);
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(0,0,0,0.06);
            text-transform: capitalize;
        }

        .form-group { margin-bottom: 20px; }
        .form-group:last-child { margin-bottom: 0; }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--text-secondary);
            font-size: 0.85rem;
        }

        input[type="text"], textarea {
            width: 100%;
            padding: 14px 16px;
            border: 1px solid rgba(0,0,0,0.1);
            border-radius: 10px;
            background: var(--bg-color);
            font-family: 'Inter', sans-serif;
            font-size: 0.95rem;
            color: var(--text-primary);
            transition: all 0.25s ease;
        }

        input[type="text"]:focus, textarea:focus {
            border-color: var(--page-accent);
            outline: none;
            box-shadow: 0 0 0 4px rgba(0, 51, 102, 0.1);
            background: white;
        }

        textarea { min-height: 120px; resize: vertical; line-height: 1.6; }

        .status-toast {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: var(--text-primary);
            color: white;
            padding: 16px 28px;
            border-radius: 14px;
            box-shadow: 0 8px 30px rgba(0,0,0,0.2);
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.35s ease;
            font-weight: 500;
            z-index: 1000;
        }

        .status-toast.visible {
            opacity: 1;
            transform: translateY(0);
        }

        @media (max-width: 1024px) {
            .admin-sidebar { width: 80px; padding: 20px 15px; }
            .admin-logo span, .admin-menu a span:last-child, .sidebar-footer span:last-child { display: none; }
            .admin-logo { justify-content: center; }
            .admin-menu a { justify-content: center; padding: 14px; }
            .admin-content { margin-left: 80px; width: calc(100% - 80px); padding: 30px; }
        }

        @media (max-width: 768px) {
            .admin-sidebar { display: none; }
            .admin-content { margin-left: 0; width: 100%; padding: 20px; }
            .admin-header { flex-direction: column; gap: 20px; text-align: center; }
            .header-actions { flex-wrap: wrap; justify-content: center; }
        }
    </style>
</head>
<body>

    <aside class="admin-sidebar">
        <div class="admin-logo">
            <div class="admin-logo-icon">S</div>
            <span>Admin</span>
        </div>
        <nav class="admin-menu" id="admin-menu">
            <!-- Menu items generated by JS -->
        </nav>
        <div class="sidebar-footer">
            <a href="/" target="_blank">
                <span>üåê</span>
                <span>View Live Site</span>
            </a>
        </div>
    </aside>

    <main class="admin-content">
        <div class="admin-header">
            <h1>Content Editor</h1>
            <div class="header-actions">
                <button onclick="resetContent()" class="btn btn-secondary">Reset to Default</button>
                <button onclick="downloadConfig()" class="btn btn-secondary">Download Config</button>
                <button onclick="saveChanges()" class="btn btn-primary">Save & Publish</button>
            </div>
        </div>

        <div id="editor-container">
            <p style="color: #888;">Loading content editor...</p>
        </div>
    </main>

    <div id="status-toast" class="status-toast">Changes saved!</div>

    <script>
        // Default content embedded directly to avoid module import issues
        const defaultContent = {
            home: {
                hero: {
                    title: "Engineering the Full Spectrum of the Earth",
                    subtitle: "Marine, transport, energy, and advanced construction solutions across Africa, India, and the Gulf.",
                    ctaMain: "Explore Capabilities",
                    ctaSec: "Rebuild Signature"
                },
                about: {
                    title: "Who We Are",
                    desc1: "SapthaVarnah Geo Technologies is an infrastructure and geo-engineering company delivering climate-resilient, future-ready projects.",
                    desc2: "Drawing inspiration from the seven colours of the earth, we integrate geology, engineering, and modern construction technologies into every solution."
                },
                closing: {
                    title: "Infrastructure built with respect for every layer of the earth it touches.",
                    cta: "Contact SapthaVarnah"
                }
            },
            about: {
                philosophy: {
                    label: "Our Philosophy",
                    title: "Harmony with the Earth",
                    desc1: "At SapthaVarnah, we believe infrastructure should work in harmony with the earth it is built upon. Every site carries its own geological, environmental, and social context. Understanding these layers is fundamental to creating infrastructure that lasts.",
                    desc2: "Our name reflects the seven colours of the earth ‚Äî a symbol of diversity, balance, and completeness. This philosophy shapes our multidisciplinary approach to engineering and construction."
                },
                approach: {
                    label: "Engineering Approach",
                    title: "Bridging Tradition & Innovation",
                    desc1: "We deliver integrated solutions spanning planning, engineering, construction, and modern building technologies. Our expertise bridges traditional civil engineering with advanced construction systems.",
                    desc2: "This allows us to meet the critical demands of climate resilience, speed of delivery, and long-term sustainability for both public and private infrastructure."
                },
                leadership: {
                    title: "Leadership & Expertise",
                    card1Title: "Regional Knowledge",
                    card1Desc: "Led by professionals with deep experience across marine works, transport infrastructure, and energy projects in Africa, India, and the Gulf.",
                    card2Title: "Technical Depth",
                    card2Desc: "Our teams integrate regional knowledge with technical depth and execution capability to ensure project reliability across diverse environments."
                }
            },
            capabilities: {
                hero: {
                    label: "Core Capabilities",
                    title: "Integrated Engineering Solutions"
                },
                marine: {
                    label: "Sector 01",
                    title: "Marine & Coastal Infrastructure",
                    desc: "We deliver robust marine infrastructure designed to withstand dynamic coastal and ocean conditions."
                },
                transport: {
                    label: "Sector 02",
                    title: "Transport Infrastructure",
                    desc: "Our transport solutions enhance connectivity and economic growth across regional markets."
                },
                energy: {
                    label: "Sector 03",
                    title: "Energy Infrastructure",
                    desc: "Supporting energy transition and reliability through resilient infrastructure development."
                },
                systems: {
                    label: "Sector 04",
                    title: "Modern Construction Systems",
                    precastTitle: "Precast Construction",
                    precastDesc: "Industrialised precast solutions ensuring quality, speed, and precision for large-scale infrastructure.",
                    gfrgTitle: "GFRG Systems",
                    gfrgDesc: "Rapid, lightweight, and sustainable building technology for high-performance structural delivery."
                }
            },
            sustainability: {
                hero: {
                    label: "Sustainability",
                    title: "Responsible Infrastructure"
                },
                logic: {
                    label: "Logic",
                    title: "Balanced Performance",
                    desc: "Sustainability at SapthaVarnah is embedded in engineering decisions, material selection, and construction methodology. Our focus is on delivering infrastructure that balances performance, environmental responsibility, and long-term value."
                },
                initiatives: {
                    item1Title: "Geo-informed design",
                    item1Desc: "Using site-specific geological data to optimize foundation depth and material strength.",
                    item2Title: "Low-carbon precast",
                    item2Desc: "Shifting construction off-site to controlled environments to reduce waste and energy use.",
                    item3Title: "BIM-enabled execution",
                    item3Desc: "Digital twins ensure precision in planning, reducing rework and material errors."
                }
            },
            contact: {
                hero: {
                    label: "Get in Touch",
                    title: "Connect with Our Team"
                },
                details: {
                    oppsLabel: "Project Opportunities",
                    regionsLabel: "Regions Served",
                    regionsDesc: "Strategically positioned to serve emerging and established hubs."
                }
            }
        };

        // Deep clone for reset
        const originalContent = JSON.parse(JSON.stringify(defaultContent));
        let currentContent = JSON.parse(JSON.stringify(defaultContent));

        // Load from localStorage if exists
        const saved = localStorage.getItem('siteContent');
        if (saved) {
            try {
                currentContent = JSON.parse(saved);
                console.log('Loaded content from localStorage');
            } catch (e) {
                console.warn('Failed to parse saved content, using defaults');
            }
        }

        // Generate menu items
        function generateMenu() {
            const menuContainer = document.getElementById('admin-menu');
            const icons = { home: 'üè†', about: '‚ÑπÔ∏è', capabilities: '‚öôÔ∏è', sustainability: 'üå±', contact: 'üìß' };
            let menuHtml = '';
            
            Object.keys(currentContent).forEach((page, index) => {
                menuHtml += `
                    <a href="#" onclick="showSection('${page}'); return false;" class="${index === 0 ? 'active' : ''}">
                        <span>${icons[page] || 'üìÑ'}</span>
                        <span>${page.charAt(0).toUpperCase() + page.slice(1)}</span>
                    </a>
                `;
            });
            
            menuContainer.innerHTML = menuHtml;
        }

        // Generate form inputs
        function generateInputs(sectionName, sectionData) {
            let html = `<div id="section-${sectionName}" class="editor-form ${sectionName === 'home' ? 'active' : ''}">`;
            html += `<h2 class="page-title">${sectionName} Page</h2>`;

            for (const [groupKey, groupVal] of Object.entries(sectionData)) {
                html += `<div class="section-card"><h3>${groupKey.replace(/([A-Z])/g, ' $1')}</h3>`;

                for (const [fieldKey, fieldVal] of Object.entries(groupVal)) {
                    const inputId = `${sectionName}-${groupKey}-${fieldKey}`;
                    const label = fieldKey.replace(/([A-Z])/g, ' $1').replace(/^./, str => str.toUpperCase());
                    const escapedVal = String(fieldVal).replace(/"/g, '&quot;');

                    if (String(fieldVal).length > 80) {
                        html += `
                            <div class="form-group">
                                <label for="${inputId}">${label}</label>
                                <textarea id="${inputId}" onchange="updateContent('${sectionName}', '${groupKey}', '${fieldKey}', this.value)">${fieldVal}</textarea>
                            </div>`;
                    } else {
                        html += `
                            <div class="form-group">
                                <label for="${inputId}">${label}</label>
                                <input type="text" id="${inputId}" value="${escapedVal}" onchange="updateContent('${sectionName}', '${groupKey}', '${fieldKey}', this.value)">
                            </div>`;
                    }
                }
                html += `</div>`;
            }

            html += `</div>`;
            return html;
        }

        // Render all forms
        function renderEditor() {
            const editorContainer = document.getElementById('editor-container');
            let allForms = '';
            for (const [page, data] of Object.entries(currentContent)) {
                allForms += generateInputs(page, data);
            }
            editorContainer.innerHTML = allForms;
        }

        // Global functions
        function updateContent(page, group, field, value) {
            currentContent[page][group][field] = value;
        }

        function saveChanges() {
            localStorage.setItem('siteContent', JSON.stringify(currentContent));
            showToast("‚úì Changes saved! Refresh the main site to see updates.");
        }

        function downloadConfig() {
            const dataStr = "export const defaultContent = " + JSON.stringify(currentContent, null, 4) + ";";
            const blob = new Blob([dataStr], { type: "text/javascript" });
            const url = URL.createObjectURL(blob);
            const a = document.createElement("a");
            a.href = url;
            a.download = "content.js";
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            showToast("‚úì Config file downloaded!");
        }

        function resetContent() {
            if (confirm('Reset all content to defaults? This cannot be undone.')) {
                localStorage.removeItem('siteContent');
                currentContent = JSON.parse(JSON.stringify(originalContent));
                location.reload();
            }
        }

        function showSection(sectionId) {
            document.querySelectorAll('.editor-form').forEach(el => el.classList.remove('active'));
            const section = document.querySelector(`#section-${sectionId}`);
            if (section) section.classList.add('active');

            document.querySelectorAll('.admin-menu a').forEach(el => el.classList.remove('active'));
            event.target.closest('a').classList.add('active');
        }

        function showToast(msg) {
            const toast = document.getElementById('status-toast');
            toast.textContent = msg;
            toast.classList.add('visible');
            setTimeout(() => toast.classList.remove('visible'), 3000);
        }

        // Initialize on load
        document.addEventListener('DOMContentLoaded', function() {
            generateMenu();
            renderEditor();
            console.log('Admin panel initialized with', Object.keys(currentContent).length, 'sections');
        });
    </script>
</body>
</html>
